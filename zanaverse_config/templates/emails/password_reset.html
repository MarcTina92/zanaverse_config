{# password_reset.html — Zanaverse #}
{% set brand = brand_name or app_name or "Zanaverse" %}
{% set reset_url = link or reset_link or password_reset_link or password_reset_url %}
{% set logo_url = frappe.utils.get_url("/assets/zanaverse_config/images/zv-logo.png") %}

<!doctype html>
<html>
  <head>
    <meta name="x-apple-disable-message-reformatting">
    <meta name="format-detection" content="telephone=no,date=no,address=no,email=no,url=no">
    <meta name="color-scheme" content="light dark">
    <meta name="supported-color-schemes" content="light dark">
    <title>{{ _("Reset your password") }}</title>
    <style>
      /* Preheader hide */
      .preheader { display:none !important; visibility:hidden; opacity:0; color:transparent; height:0; width:0; overflow:hidden; mso-hide:all; }
      /* Dark mode tweaks (supported clients) */
      @media (prefers-color-scheme: dark) {
        body, .wrapper { background:#0b0f14 !important; }
        .card { background:#111827 !important; }
        .muted { color:#9ca3af !important; }
        .title, .text { color:#e5e7eb !important; }
        .btn { background:#2563eb !important; }
      }
    </style>
  </head>
  <body style="margin:0;padding:0;background:#f3f4f6;">
    <span class="preheader">
      {{ _("Use the secure link inside to set a new password for") }} {{ brand }}.
    </span>

    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" class="wrapper" style="background:#f3f4f6;">
      <tr>
        <td align="center" style="padding:24px;">
          <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="max-width:560px;">
            <!-- Header -->
            <tr>
              <td align="center" style="padding:16px 24px;border-bottom:1px solid #e5e7eb;background:#ffffff;">
                <img src="{{ logo_url }}" alt="Zanaverse" height="40" style="display:block;height:40px;">
              </td>
            </tr>

            <!-- Card -->
            <tr>
              <td class="card" style="background:#ffffff;padding:24px;">
                <h2 class="title" style="margin:0 0 8px;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-size:20px;line-height:1.3;color:#111827;">
                  {{ _("Reset your password") }}
                </h2>

                <p class="text" style="margin:0 0 16px;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-size:14px;color:#374151;">
                  {% if user_fullname %}{{ user_fullname }},{% endif %}
                  {{ _("You requested to reset your password for") }} <strong>{{ brand }}</strong>.
                </p>

                <!-- Button (bulletproof w/ VML for Outlook) -->
                <table role="presentation" cellspacing="0" cellpadding="0" border="0" style="margin:0 0 24px;">
                  <tr>
                    <td align="left">
                      <!--[if mso]>
                      <v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word"
                        href="{{ reset_url }}" style="height:44px;v-text-anchor:middle;width:220px;" arcsize="12%"
                        fillcolor="#111111" stroke="f" >
                        <w:anchorlock/>
                        <center style="color:#ffffff;font-family:Segoe UI, Arial, sans-serif;font-size:14px;">
                          {{ _("Set New Password") }}
                        </center>
                      </v:roundrect>
                      <![endif]-->
                      <!--[if !mso]><!-- -->
                      <a class="btn" href="{{ reset_url }}" target="_blank"
                        style="display:inline-block;background:#111111;color:#ffffff;text-decoration:none;
                               padding:12px 18px;border-radius:8px;font-family:ui-sans-serif,system-ui,-apple-system,
                               Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-size:14px;">
                        {{ _("Set New Password") }}
                      </a>
                      <!--<![endif]-->
                    </td>
                  </tr>
                </table>

                <!-- Fallback link -->
                <p class="muted" style="margin:0 0 8px;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-size:12px;color:#6b7280;">
                  {{ _("If the button doesn’t work, copy and paste this link into your browser:") }}
                </p>
                <p style="margin:0 0 16px;word-break:break-all;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-size:12px;color:#2563eb;">
                  <a href="{{ reset_url }}" target="_blank" style="color:#2563eb;text-decoration:underline;">{{ reset_url }}</a>
                </p>

                <!-- Footer note -->
                <p class="muted" style="margin:16px 0 0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-size:12px;color:#6b7280;">
                  {{ _("If you didn’t request this, you can safely ignore this email.") }}
                </p>
              </td>
            </tr>

            <!-- Footer spacer -->
            <tr><td style="height:24px;background:#f3f4f6;"></td></tr>
          </table>
        </td>
      </tr>
    </table>
  </body>
</html>
